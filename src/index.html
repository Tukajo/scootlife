<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Scoot Life</title>

    <style>
        canvas {
            display: block;
            position: absolute;
            margin: auto;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
        }
    </style>

    <script src="spriteextractor.js"></script>

</head>
<body>
<script>
var
        canvas,
        ctx,
        width,
        height,
        currentstate,

        states = {
            MainMenu:0,
            GameScreen:1,
            Credits:2
        },
        playbtn;
function main(){
    canvas = document.createElement("canvas");
    width = window.innerWidth;
    height = window.innerHeight;

    var evt = "mousedown";

    if(width >= 500){
        width = 1200;
        height = 600;
        canvas.style.border = "1px solid #000";
        evt = "mousedown";
    }

    canvas.width = width;
    canvas.height = height;
    ctx = canvas.getContext("2d");
    currentstate = states.MainMenu;
    document.body.appendChild(canvas);

    var img = new Image();
    img.src = "gfx/sprtsht01.png";
    img.onload = function(){
        initSprites(this);
        ctx.fillStyle = s_bg.color;


        playbtn = {
            x: (width - s_buttons.RunFactory.width)/2,
            y: height - 200,
            width: s_buttons.RunFactory.width,
            height: s_buttons.RunFactory.height
        }
        s_buttons.RunFactory.draw(ctx,playbtn.x,playbtn.y);
        run();
    }



}

function render(){
    s_buttons.RunFactory.draw(ctx,playbtn.x,playbtn.y);
    ctx.fillRect(0,0,width,height);
    if(currentstate === states.MainMenu){
        console.log("running the drawings");
        s_bg.draw(ctx, 0, height - s_bg.height);
        s_bg.draw(ctx, s_bg.width, height - s_bg.height);
        s_buttons.RunFactory.draw(ctx,playbtn.x,playbtn.y);
    }

}
function update(){

}
function run(){
    console.log("Run called");

    var loop = function(){
        update();
        render();
        window.requestAnimationFrame(loop,canvas);
    }
    window.requestAnimationFrame(loop,canvas);
}


main();



</script>



</body>
</html>